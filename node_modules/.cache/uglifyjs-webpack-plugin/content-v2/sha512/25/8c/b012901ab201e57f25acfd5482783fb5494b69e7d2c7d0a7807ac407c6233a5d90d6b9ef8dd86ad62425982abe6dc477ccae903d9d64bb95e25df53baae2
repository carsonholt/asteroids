{"code":"!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";function i(t,e){return{x:t.x+e.x,y:t.y+e.y}}function r(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function o(t){var e=r(t);return{x:t.x/e,y:t.y/e}}function s(t,e){return{x:t.x*e,y:t.y*e}}n.r(e);const a=720,c=600;var h=document.createElement(\"canvas\"),l=h.getContext(\"2d\");h.height=c,h.width=a,document.body.appendChild(h);var u=null,y={space:!1,left:!1,right:!1,up:!1,down:!1,w:!1},d={space:!1,left:!1,right:!1,up:!1,down:!1,w:!1},f=3,p=5,g=a/2,x=c/2,w={x:0,y:0},v={x:0,y:0};const m=2;var b=new class{constructor(t,e){this.x=t,this.y=e,this.angle=0,this.ship=new Image,this.ship.src=\"img/ship.jpg\",this.width=30,this.height=40,this.velocity={x:0,y:0},console.log(\"Player: (\"+this.x+\", \"+this.y+\")\")}update(t,e,n){var a=function(t,e){return{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.y*Math.sin(e)+t.y*Math.cos(e)}}({x:0,y:-1},this.angle);e.space&&!n.space&&(M.push(new P(g+15,x,10)),console.log(\"laser fired\")),e.up&&(this.velocity=i(this.velocity,a),r(this.velocity)>m&&(this.velocity=s(o(this.velocity),m))),e.down&&(this.velocity=i(this.velocity,function(t){return{x:-t.x,y:-t.y}}(a)),r(this.velocity)>m&&(this.velocity=s(o(this.velocity),m))),e.left&&(this.angle-=1),e.right&&(this.angle+=1);var c=i(this,this.velocity);this.x=c.x,this.y=c.y,A(this)}render(t){t.save(),t.translate(this.x,this.y),t.rotate(this.angle*Math.PI/180),t.drawImage(this.ship,-15,-20),t.restore()}}(a/2,c/2);b.x=g,b.y=x;var M=[],k=[];function A(t){t.x>=a?t.x%=a:t.x<0&&(t.x+=a),t.y>=c?t.y%=c:t.y<0&&(t.y+=c)}function j(t){o(v),k.forEach(function(e){e.update(t),(e.x<10||e.x>a||e.y<1||e.y>c)&&A(e)}),M.forEach(function(e,n){e.update(t),(e.x<0||e.x>=a||e.y<0||e.y>=c)&&M.splice(n,1),k.forEach(function(t){(function(t,e){return t.x>=e.x&&t.x<e.x+e.width&&t.y>=e.y&&t.y<e.y+e.height&&(console.log(\"collision detected\"),console.log(t.constructor.name),console.log(e.constructor.name),!0)})(e,t)&&(t.split(),k.splice(n,1))})}),b.update(t,y,d)}window.addEventListener(\"keydown\",function(t){switch(t.key){case\" \":y.space=!0;break;case\"ArrowLeft\":y.left=!0;break;case\"ArrowRight\":y.right=!0;break;case\"ArrowUp\":y.up=!0;break;case\"ArrowDown\":y.down=!0}t.preventDefault()}),console.log(\"Add listener\"),window.addEventListener(\"keyup\",function(t){switch(t.key){case\" \":console.log(\"no fire?\",y,d),y.space=!1;break;case\"ArrowLeft\":y.left=!1;break;case\"ArrowRight\":y.right=!1;break;case\"ArrowUp\":y.up=!1;break;case\"ArrowDown\":y.down=!1}}),window.requestAnimationFrame(function t(e){u||(u=e);var n=e-u;u=e,0==k.length&&function(){for(0;k.length<p;){console.log(\"asteroid length: \"+k.length);var t=Math.random()*a,e=Math.random()*c;if(t<a/2-50||t>a/2+50||e<c/2-50||e>c/2+50){var n=2*Math.random()-1,i=2*Math.random()-1,r=40*Math.random()+20;k.push(new O(t,e,{x:n,y:i},r)),console.log(\"New asteroid at: (\"+t+\", \"+e+\") with speed (\"+n+\", \"+i+\") and mass \"+r)}}}(),j(n),l.clearRect(0,0,a,c),l.fillStyle=\"#000000\",l.fillRect(0,0,a,c),b.render(l),k.forEach(function(t){t.render(l)}),M.forEach(function(t){t.render(l)}),f<1||(d=JSON.parse(JSON.stringify(y)),window.requestAnimationFrame(t))});class O{constructor(t,e,n,i){this.x=t,this.y=e,this.v=n,this.m=i,this.asteroidImg=new Image,this.asteroidImg.src=\"img/asteroid.jpg\"}render(t){t.drawImage(this.asteroidImg,this.x,this.y,Math.round(this.m),Math.round(this.m))}update(t){this.x+=this.v.x*t,this.y+=this.v.y*t}}function P(t,e,n){this.x=t,this.y=e,this.l=n}P.prototype.update=function(t){this.x+=.2*w,this.y+=.2*w},P.prototype.render=function(t){t.beginPath(),t.fillStyle=\"#FFFFFF\",t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x+this.l,this.y+this.l),t.stroke()},console.log(\"Game started\")}]);","extractedComments":[]}