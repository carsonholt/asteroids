{"code":"!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";function o(t,e){return{x:t.x+e.x,y:t.y+e.y}}function n(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function r(t){var e=n(t);return{x:t.x/e,y:t.y/e}}function s(t){return{x:-t.y,y:t.x}}function a(t){return{x:-t.x,y:-t.y}}function h(t,e){return{x:t.x*e,y:t.y*e}}i.r(e);const l=900,c=600;var u=document.createElement(\"canvas\"),y=u.getContext(\"2d\");u.height=c,u.width=l,document.body.appendChild(u);var d=null,f={space:!1,left:!1,right:!1,up:!1,down:!1,w:!1},p={space:!1,left:!1,right:!1,up:!1,down:!1,w:!1},x=3,g=0,w=0,v=5,m={x:0,y:0};const b=2;var M=new class{constructor(t,e){this.x=t,this.y=e,this.angle=0,this.ship=new Image,this.ship.src=\"img/ship.jpg\",this.width=30,this.height=40,this.velocity={x:0,y:0},console.log(\"Player: (\"+this.x+\", \"+this.y+\")\")}update(t,e,i){var s=function(t,e){return{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.y*Math.sin(e)+t.y*Math.cos(e)}}({x:0,y:-1},this.angle);if(e.space&&!i.space&&(k.push(new _(this.x,this.y,{x:s.x,y:s.y})),console.log(\"laser fired\"),T.play()),e.up&&(this.velocity=o(this.velocity,s),n(this.velocity)>b&&(this.velocity=h(r(this.velocity),b))),e.down&&(this.velocity=o(this.velocity,a(s)),n(this.velocity)>b&&(this.velocity=h(r(this.velocity),b))),e.left&&(this.angle-=1),e.right&&(this.angle+=1),e.w&&!i.w)return this.x=Math.random()*l,void(this.y=Math.random()*c);var u=o(this,this.velocity);this.x=u.x,this.y=u.y,j(this)}render(t){t.save(),t.translate(this.x,this.y),t.rotate(this.angle*Math.PI/180),t.drawImage(this.ship,-15,-20),t.restore()}}(360,300);M.x=360,M.y=300;var k=[],F=[],A=new Audio(\"snd/Hit_Hurt2.wav\"),S=new Audio(\"snd/Hit_Hurt.wav\"),T=new Audio(\"snd/Laser_Shoot4.wav\");function j(t){t.x>=600?t.x%=600:t.x<0&&(t.x+=600),t.y>=c?t.y%=c:t.y<0&&(t.y+=c)}function I(t,e){return t.x>=e.x&&t.x<e.x+e.width&&t.y>=e.y&&t.y<e.y+e.height&&(console.log(\"collision detected\"),console.log(t.constructor.name),console.log(e.constructor.name),!0)}function O(t){y.clearRect(0,0,l,c),y.fillStyle=\"#000000\",y.fillRect(0,0,l,c),y.strokeStyle=\"#FFFFFF\",y.beginPath(),y.moveTo(720,0),y.lineTo(720,c),y.stroke(),function(){y.fillStyle=\"#FFFFFF\",y.font=\"16px Times New Roman\";for(var t=0;t<x;t++)y.drawImage(M.ship,800+20*t,90,15,20),y.fillText(\"Lives: \",750,100);y.fillText(\"Level: \"+w,750,130),y.fillText(\"Score: \"+g,750,160),y.fillText(\"Controls\",750,240),y.fillText(\"Arrow keys to move\",750,270),y.fillText(\"Space to shoot\",750,300),y.fillText(\"W to warp\",750,330)}(),M.render(y),F.forEach(function(t){t.render(y)}),k.forEach(function(t){t.render(y)})}window.addEventListener(\"keydown\",function(t){switch(t.key){case\" \":f.space=!0;break;case\"ArrowLeft\":f.left=!0;break;case\"ArrowRight\":f.right=!0;break;case\"ArrowUp\":f.up=!0;break;case\"ArrowDown\":f.down=!0;break;case\"w\":f.w=!0}t.preventDefault()}),console.log(\"Add listener\"),window.addEventListener(\"keyup\",function(t){switch(t.key){case\" \":console.log(\"no fire?\",f,p),f.space=!1;break;case\"ArrowLeft\":f.left=!1;break;case\"ArrowRight\":f.right=!1;break;case\"ArrowUp\":f.up=!1;break;case\"ArrowDown\":f.down=!1;break;case\"w\":f.w=!1}}),window.requestAnimationFrame(function t(e){d||(d=e);var i=e-d;d=e,0==F.length&&function(){for(w++,v+=2;F.length<v;){console.log(\"asteroid length: \"+F.length);var t=Math.random()*l,e=Math.random()*c;if(t<310||t>410||e<c/2-50||e>c/2){var i=.5*Math.random()-.25,o=.5*Math.random()-.25,n=40*Math.random()+20;F.push(new P(t,e,{x:i,y:o},n)),console.log(\"New asteroid at: (\"+t+\", \"+e+\") with speed (\"+i+\", \"+o+\") and mass \"+n)}}}(),function(t){r(m),F.forEach(function(e){if(e.update(t),I(M,e))return x--,M.x=360,M.y=c/2,void S.play()}),k.forEach(function(e,i){e.update(t),(e.x<0||e.x>=720||e.y<0||e.y>=c)&&k.splice(i,1),F.forEach(function(t,o){console.log(\"asteroid height: \"+t.height),I(e,t)&&(console.log(\"asteroid hit\"),t.m>25?(t.split(e),g+=10):g+=Math.round(t.m),F.splice(o,1),k.splice(i,1));for(var n=0;n<F.length-n;n++)Math.abs(t.x-F[n].x)<100&&Math.abs(t.y-F[n].y)<100&&I(t,F[n])&&t!=F[n]&&(t.split(e),F[n].split(e),F.splice(o,1),F.splice(n,1),k.splice(i,1),A.play())})}),M.update(t,f,p)}(i),O(),x<1||(p=JSON.parse(JSON.stringify(f)),window.requestAnimationFrame(t))});class P{constructor(t,e,i,o){this.x=t,this.y=e,this.v=i,this.m=o,this.asteroidImg=new Image,this.asteroidImg.src=\"img/asteroid.jpg\",this.width=o,this.height=o}render(t){t.drawImage(this.asteroidImg,this.x,this.y,Math.round(this.m),Math.round(this.m))}update(t){this.x+=this.v.x*t,this.y+=this.v.y*t,j(this)}split(t){F.push(new P(this.x,this.y,s(this.v),this.m/Math.sqrt(2))),F.push(new P(this.x,this.y,a(s(this.v)),this.m/Math.sqrt(2)))}}function _(t,e,i){this.x=t,this.y=e,this.v={x:M.velocity.x,y:M.velocity.y},console.log(\"Laser created at: (\"+this.x+\", \"+this.y+\")\"),console.log(k.length)}_.prototype.update=function(t){this.x+=t*this.v.x,this.y+=t*this.v.y},_.prototype.render=function(t){t.strokeStyle=\"#FF0000\",t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x+10*Math.sin(M.angle),this.y+10*Math.cos(M.angle)),t.stroke()},console.log(\"Game started\")}]);","extractedComments":[]}